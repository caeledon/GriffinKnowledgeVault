# Протокол API-команд для роботы с GitHub

Данный документ определяет стандарты команд, которые Грифон должен использовать для взаимодействия с репозиторием  GriffinKnowledgeVault через GitHub API.

---

## 1. Авторизация 

- Для всех запросов используй заголовок:
```
Authorization: Bearer [ТОКЕН]
```

- Content-Type:
```
Content-Type: application/json
```

---

## 2. Создание нового файла

**Метод:** `PUT`

**URL:**
```
https://api.github.com/repos/caeledon/GriffinKnowledgeVault/contents/шлях/до/файлу.md
```

**JSON тело:**
```json
{
  "message": "Комментарий к комиту",
  "content": "Base64-закодированное_содержимое",
  "branch": "main"
}
```

---

## 3. Обновление существующего файла

**Дополнительно запрашивается SHA существующего файла.** Получи его предварительно через `GET` (см. пункт 4).

**Метод:** `PUT`

**JSON тело:**
```json
{
  "message": "Обновление файла",
  "content": "Base64-содержимое",
  "sha": "существующий_sha",
  "branch": "main"
}
```

---

## 4. Получение мета-информации о файле

**Метод:** `GET`

**URL:**
```
https://api.github.com/repos/caeledon/GriffinKnowledgeVault/contents/шлях/до/файлу.md
```

Ответ будет содержать поле `sha`, которое необходимо для обновления.

---

## 5. Создание новой папки

GitHub создаёт новую папку автоматически при создании файла по новому пути:
```
contents/reports/new_file.md → создаёт папку `reports/`, если её ещё не существует.
```

---

## 6. Кодирование содержимого в Base64

**Пояснение:** GitHub API принимает только закодированное в Base64 содержимое файлов.

**Пример:**
```markdown
# Тестовий документ
```
→ Base64:
```
IyBUZXN0b3ZpZCBkb2t1bWVudA==
```

---

## 7. Поведение при ошибках

- Код 400: проблема с JSON — проверить формат.
- Код 401/403: неправильный или отсутствующий токен.
- Код 422: файл уже существует или SHA некорректен.

---

✅ Придерживайся данного протокола, чтобы гарантировать безопасность и управляемое взаимодействие с репозиторием GriffinKnowledgeVault.
